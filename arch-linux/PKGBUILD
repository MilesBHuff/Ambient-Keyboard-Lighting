# Maintainer: Miles B Huff <MilesBHuff@Users.NoReply.Github.com>
pkgrel=1
pkgver=34ab57d346cafa5e52c43cf431412aef0c28ff57
pkgname=ambient-kb-git
pkgdesc="Sets keyboard color to match display on certain System76 laptops"
license=('AGPL-3.0-or-later')

url="https://github.com/MilesBHuff/Ambient-Keyboard-Lighting"
source=('git+https://github.com/MilesBHuff/Ambient-Keyboard-Lighting.git')
md5sums=('SKIP')

depends=(
    'gcc-libs' 'glibc' 'libxau' 'libxcb' 'libxdmcp' # Linked dependencies (the output of `calc-depends.sh`)
    'system76-acpi-dkms' # Runtime dependencies
)
makedepends=('cargo' 'rust')
arch=('x86_64')

build() {
    ls
	cd "$srcdir/Ambient-Keyboard-Lighting-master"
	cargo build --release
}

package() {
    _from_dir="$srcdir/Ambient-Keyboard-Lighting-master/target/release/ambient-kb"
    _to_dir="$pkgdir/usr/bin/"

    mkdir -p "$_to_dir"
    sudo cp "$_from_dir" "$_to_dir"
}
